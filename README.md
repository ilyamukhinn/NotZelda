<a name="readme-top"></a>
<!-- PROJECT HEADER -->
<br />
<div align="center">
  <h3 align="center">NotZelda</h3>
  <p align="center">
    MD описание проекта
    <br />
  </p>
</div>

<!-- ABOUT THE PROJECT SECTION -->
## Краткое описание

Данный проект посвящен продолжению изучения архитектуры ECS (после [NotMario][NotMario-url]) и [SFML][SFML-url] (Audio)

## Зависимости

* Библиотека SFML (2.6.1)

## Сборка и запуск

Вы можете открыть проект в среде разработки Visual Studio (на момент написания программы использовалась VS 2022), в корневой директории располагается файл проекта "NotZelda.vcxproj". Проект сконфигурирован как для Debug, так и для Release сборки.

После сборки исполняемый *.exe файл будет находится в директории "\*Корневая папка проекта\*/\*Имя проекта/.../bin/\*.exe\*"

## После запуска

На экране будет представлено главное меню с возможностью выбора уровня (на данный момент реализован только уровень 1)
- W - переключение пунктов меню вверх
- S - переключение пунктов меню вниз
- Escape - выход из игры (закрытие приложения)
- D - выбрать пунки меню

Во время игры на экране будет представлен игрок (Link), соответствующие тайлы и NPC (противники), с помощью клавиш на клавиатуре вы можете:
- W - двигаться вверх
- A - двигаться влево
- S - двигаться вниз
- D - двигаться вправо
- Space - выпускать меч в направлении движения игрока

С помощью меча вы можете наносить урон противникам, при этом они также могут нанести вам урон. Для восполнения здоровья необходимо подбирать сердца, разбросанные по карте. 

Также реализована система AI, при помощи которой некоторые NPC следуют по заданными маршрутам, а некоторые следуют прямо за игроком, если он попадает в их область видимости.

Помимо этого реализован механизм телепортации с помощью черных прямоугольников, расположенных  на игровой карте - зайдя в один, вы попадаете в другой (в случайном порядке).

Также вы можете увидеть графический интерфейс с 4-мя вкладками: Debug, Sounds, Animations и Entity Manager

- Debug: вы можете управлять следующими элементами игры:
  - Draw Grid - отобразить графическую сетку карты 
  - Draw Textures - оторбазить текстуры объектов
  - Draw Debug - отобразить hitbox'ы персонажей, а также линии видимости между NPC и игроком
  - Follow Cam - менять поведение камеры (следовать за игроком или центрировать относительно  настоящей области игровой карты, где находится игрок)

- Sounds: вы можете проигрывать все используемые в игре звуковые дорожки.

- Animations: вы можете наблюдать все анимации, которые задействованы в игре.

- Entity Manager: вы можете наблюдать за активными объектами: 
  - Сердца
  - Порталы
  - Меч
  - Игрок 
  - Тайлы
  - NPC

Все ресурсы (текстуры) расположены в директории assets.

Также для проекта созданы config файлы (assets.txt и level*.txt), которые расположены в папке configs. Вы можете редактировать их перед запуском. Спецификация файла asset'ов:

- Texture N P: строка определяет параметры текстуры
  
| Смысл             | Имя в файле | Тип         |
|:------------------|:------------|:-----------:|
| Texture name      | N           | std::string |
| Texture filepath  | P           | std::string |

- Animation N T F S: строка определяет параметры анимации

| Смысл           | Имя в файле | Тип             |
|:----------------|:------------|:---------------:|
| Animation name  | N           | std::string     |
| Texture name    | T           | std::string     |
| Frame count     | F           | int             |
| Animation speed | S           | int             |

- Font N P: строка определяет параметры шрифта
  
| Смысл          | Имя в файле | Тип         |
|:---------------|:------------|:-----------:|
| Font name      | N           | std::string |
| Font filepath  | P           | std::string |

- Sound N P: строка определяет параметры аудиодорожки
  
| Смысл          | Имя в файле | Тип         |
|:---------------|:------------|:-----------:|
| Sound name     | N           | std::string |
| Sound filepath | P           | std::string |

Перед ознакомлением со спецификацией файла для редактирования уровней, следует отметить, что все позиции объектов определены координатной сеткой (кроме сущности "Игрок/Player"), ширина и высота ячеек которой равно 64х64 пикселя, а начало координат определено в нижнем левом углу окна приложения. Помимо этого, карта игры разделена на несколько "комнат", и координаты сущностей в конфигурационном файле также определены, как сочетание координат комнаты и координат внутри комнаты.

Спецификация файла level'ов:

- Player X Y BX BY S H: строка определяет параметры игрока

| Смысл             | Имя в файле | Тип           |
|:------------------|:------------|:-------------:|
| Spawn position    | (X,Y)       | int, int      |
| Bounding box size | (BX,BY)     | int, int      |
| Speed             | S           | float         |
| Max health        | H           | int           |

- Tile|Portal|Heart N RX RY TX TY BM BV: строка определяет параметры tile'а, portal'а или heart'а

| Смысл            | Имя в файле | Тип         |
|:-----------------|:------------|:-----------:|
| Animation name   | N           | std::string |
| Room coordinate  | (RX,RY)     | int, int    |
| Tile position    | (TX,TY)     | int, int    |
| Blocks movement  | BM          | int (0,1)   |
| Blocks vision    | BV          | int (0,1)   |

Спецификация NPC может отличаться между собой тем, что для каждого NPC определно поведение (AI) - следовать за игроком (Follow) или перемещаться по заданной траектории (Patrol).

- NPC N RX RY TX TY BM BV H D AI ...: строка определяет параметры NPC

| Смысл            | Имя в файле | Тип         |
|:-----------------|:------------|:-----------:|
| Animation name   | N           | std::string |
| Room coordinate  | (RX,RY)     | int, int    |
| Tile position    | (TX,TY)     | int, int    |
| Blocks movement  | BM          | int (0,1)   |
| Blocks vision    | BV          | int (0,1)   |
| Max health       | H           | int         |
| Damage           | D           | int         |
| AI behavior name | AI          | std::string |
| AI parameters    | ...         | ...         |

    - AI = Follow
    | Смысл            | Имя в файле | Тип         |
    |:-----------------|:------------|:-----------:|
    | Follow speed     | S           | float       |
----------------------------------------------------
    - AI = Patrol
    | Смысл            | Имя в файле | Тип         |
    |:-----------------|:------------|:-----------:|
    | Patrol speed     | S           | float       |
    | Patrol positions | N           | int         |
    | Position 1-N     | (Xi,Yi)     | int, int    |

# Demo

Вы можете ознакомиться с demo [видео](https://www.youtube.com/watch?v=nfHuTF3bCjs) приложения, нажав на превью ниже:

<p align="center">
  <a href="https://www.youtube.com/watch?v=nfHuTF3bCjs" target="_blank">
    <img src="https://img.youtube.com/vi/nfHuTF3bCjs/maxresdefault.jpg" alt="Watch the video">
  </a>
</p>

<!-- RESOURCES LINKS -->
[NotMario-url]: https://github.com/ilyamukhinn/NotMario
[SFML-url]: https://www.sfml-dev.org/